/**
 * @file Main JS file for TextFormatterJS
 * @author Daniel Däschle
 */
!function(){var t=!1,e=null,o=!1,n=!1
window.onload=function(){document.querySelector("body").innerHTML+='<div id="highlightTooltip"><button class="text-formatter-button" onclick="document.execCommand(\'bold\', false, null)"><i class="material-icons">format_bold</i></button><button class="text-formatter-button" onclick="document.execCommand(\'italic\', false, null)"><i class="material-icons">format_italic</i></button><button class="text-formatter-button" onclick="document.execCommand(\'underline\', false, null)"><i class="material-icons">format_underline</i></button><button class="text-formatter-button" onclick="changeSize(false)"><i style="padding: 3px" class="material-icons md-18">format_size</i></button><button class="text-formatter-button" onclick="changeSize(true)"><i class="material-icons">format_size</i></button></div>'},document.onselectionchange=function(e){var n=l()
!(t=""!==n)&&o&&i()},document.onmouseup=document.onkeyup=function(){if(t){var n=c(),i=document.getElementById("highlightTooltip")
n.y>60?i.style.top=n.y-55+"px":i.style.top=n.y+25+"px",n.x<55?i.style.left="5px":i.style.left=n.x-50+"px",a(document.getElementById("highlightTooltip"),200),e=setTimeout(function(){o=!0},50)}}
var i=function(){e&&clearTimeout(e),u(document.getElementById("highlightTooltip"),200),o=!1},l=function(){if(window.getSelection){var t=window.getSelection()
if(t.anchorNode&&!1!==t.anchorNode.parentNode.isContentEditable)return t.toString()}return""},c=function(){var t,e,o=document.selection,n=0,i=0
if(o)"Control"!==o.type&&(t=o.createRange(),t.collapse(!0),n=t.boundingLeft,i=t.boundingTop)
else if(window.getSelection&&(o=window.getSelection(),o.rangeCount&&(t=o.getRangeAt(0).cloneRange(),t.getClientRects&&(t.collapse(!0),t.getClientRects().length>0&&(e=t.getClientRects()[0],n=e.left,i=e.top)),0===n&&0===i))){var l=document.createElement("span")
if(l.getClientRects){l.appendChild(document.createTextNode("​")),t.insertNode(l),e=l.getClientRects()[0],n=e.left,i=e.top
var c=l.parentNode
c.removeChild(l),c.normalize()}}return{x:n,y:i}},a=function(t,e){var o=t.style,i=25/(e||300)
o.opacity=o.opacity||0,o.display="block",n=!0,function t(){(o.opacity=parseFloat(o.opacity)+i)>1?(o.opacity=1,n=!1):setTimeout(t,25)}()},u=function(t,e){var o=t.style,i=25/(e||300)
o.opacity=o.opacity||1,function t(){n||((o.opacity-=i)<0?o.display="none":setTimeout(t,25))}()}}()
