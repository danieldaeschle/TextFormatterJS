/**
 * @file Main JS file for TextFormatterJS
 * @author Daniel Däschle
 */
!function(){var t=!1,e=null,n=!1,o=!1
window.onload=function(){document.querySelector("body").innerHTML+='<div id="highlightTooltip"><button class="text-formatter-button" id="formatBoldButton"><i class="material-icons">format_bold</i></button><button class="text-formatter-button" id="formatItalicButton"><i class="material-icons">format_italic</i></button><button class="text-formatter-button" id="formatUnderlineButton"><i class="material-icons">format_underline</i></button><button class="text-formatter-button" id="fontSizeDownButton"><i style="padding: 3px" class="material-icons md-18">format_size</i></button><button class="text-formatter-button" id="fontSizeUpButton"><i class="material-icons">format_size</i></button></div>'
var t=document.getElementById("formatBoldButton"),e=document.getElementById("formatItalicButton"),n=document.getElementById("formatItalicButton"),o=document.getElementById("fontSizeDownButton"),i=document.getElementById("fontSizeUpButton")
t.onclick=function(){document.execCommand("bold",!1,null)},e.onclick=function(){document.execCommand("italic",!1,null)},n.onclick=function(){document.execCommand("underline",!1,null)},o.onclick=function(){c(!1)},i.onclick=function(){c(!0)}},document.onselectionchange=function(){var e=l()
!(t=""!==e)&&n&&i()},document.onmouseup=document.onkeyup=function(){if(t){var o=a(),i=document.getElementById("highlightTooltip")
o.y>60?i.style.top=o.y-55+"px":i.style.top=o.y+25+"px",o.x<55?i.style.left="5px":i.style.left=o.x-50+"px",u(document.getElementById("highlightTooltip"),200),e=setTimeout(function(){n=!0},50)}}
var i=function(){e&&clearTimeout(e),d(document.getElementById("highlightTooltip"),200),n=!1},c=function(t){var e=document.queryCommandValue("fontSize")||3,n=parseInt(e)+parseInt(t?1:-1)
document.execCommand("fontSize",!1,n)},l=function(){if(window.getSelection){var t=window.getSelection()
if(t.anchorNode&&!1!==t.anchorNode.parentNode.isContentEditable)return t.toString()}return""},a=function(){var t,e,n=document.selection,o=0,i=0
if(n)"Control"!==n.type&&(t=n.createRange(),t.collapse(!0),o=t.boundingLeft,i=t.boundingTop)
else if(window.getSelection&&(n=window.getSelection(),n.rangeCount&&(t=n.getRangeAt(0).cloneRange(),t.getClientRects&&(t.collapse(!0),t.getClientRects().length>0&&(e=t.getClientRects()[0],o=e.left,i=e.top)),0===o&&0===i))){var c=document.createElement("span")
if(c.getClientRects){c.appendChild(document.createTextNode("​")),t.insertNode(c),e=c.getClientRects()[0],o=e.left,i=e.top
var l=c.parentNode
l.removeChild(c),l.normalize()}}return{x:o,y:i}},u=function(t,e){var n=t.style,i=25/(e||300)
n.opacity=n.opacity||0,n.display="block",o=!0,function t(){(n.opacity=parseFloat(n.opacity)+i)>1?(n.opacity=1,o=!1):setTimeout(t,25)}()},d=function(t,e){var n=t.style,i=25/(e||300)
n.opacity=n.opacity||1,function t(){o||((n.opacity-=i)<0?n.display="none":setTimeout(t,25))}()}}()
